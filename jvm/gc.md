# 垃圾收集算法

常说的垃圾回收主要指GC堆

### 1. GC算法有哪些？各有什么优缺点？

#### 1.1 标记-清除 算法

算法分为两个阶段，先标记，后清除。先将需要回收的对象进行标记，然后统一清除。

算法简单，缺点是会产生内存碎片。


#### 1.2 复制算法

将内存分为两块，每次使用其中的一块，当内存不足时，将存活的对象复制到另一块内存中去，剩下的直接清除。

回收后内存时连续的，缺点是会浪费一些内存，因为每次只使用其中的一块。

#### 1.3 标记-整理 算法

类似标记清除算法，只是在回收的时候将存活的对象移动到一端，剩下的清除掉。

充分使用了内存，也避免了内存碎片。因为要移动对象，效率较低。


#### 1.4 分代算法
严格上讲，它并不是一个算法，只是按照对象存活的特性将内存分成不同的区域，在不同的区域采用不同的算法，而这些算法是上面三种的组合。

JVM中，堆内存被分为新生代和老年代。

新生代中，又细划分为，Eden、Survivor1、Survivor2，这个区域一般是复制算法

老年代，对象在新生代中经过多次复制后仍然存活（默认是对象年龄达到15），会被复制到老年代，或者大对象等直接在老年代分配，而老年代根据垃圾手机器的不同会采用标记清除，或者标记整理等算法


| 算法名称 | 优点 | 缺点 |
|------|----|----|
| 标记清除 |  实现简单  |  回收后内存会变得不连续，即内存碎片，新创建的大对象可能会不够分配  |
| 复制算法 |  GC后的内存空间是连续的  | 一部分的内存浪费 |
| 标记整理 |  GC后内存是连续的，也没有浪费内存  | 效率低 |
| 分代算法 |  将内存划分成不同的区域，采用不同的收集算法进行回收| 无  |


### 2. 如何判断对象已死亡？（如何标记哪些对象需要被回收）

### 3. 垃圾收集器CMS和G1 的介绍

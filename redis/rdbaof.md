# redis 为什么这么快？

redis 4.0 之前是单线程的，4.0 之后引入了多线程处理异步任务，这个时候它还只是针对哪些操作比较耗时的命令开启异步化，避免线程阻塞，6.0的时候redis采用了真正的I/O多线程模型 来处理网络请求。

说实话其实我也不知道该如何回答这个问题，在此之前我在面试的时候一般这么回答：

- 1. 单线程，省去了多线程上下文切换的开销，没有共享资源加锁的开销
- 2. 纯内存操作，同时高效的数据结构和编码方式，都是它更加快的原因之一
- 3. 使用IO多路复用技术，保证在监听多个Socket连接的情况下，只针对有活动的（有真正读写事件的连接）Socket采取反应

这里面2和3两条，面试的时候仍然适用，只是单线程这一块，就有待商榷了。

6.0 之前的版本，Redis 的核心网络模型仍然是单线程的，在6.0 之后，正式在核心网络模型中引入了多线程，也就是所谓的 I/O threading，这个时候才真正认为redis是多线程的。

那么为什么不继续使用单线程了？单线程的瓶颈在哪里？多线程的好处是什么？在回答这些问题之前，需要先了解一下什么是I/O多路复用。

# 什么是I/O多路复用？



# 什么是事件派发器？

# RDB和AOF 持久化

# 数据库和缓存一致性问题是如何解决？


参考

[Redis 多线程网络模型全面揭秘](https://strikefreedom.top/multiple-threaded-network-model-in-redis)